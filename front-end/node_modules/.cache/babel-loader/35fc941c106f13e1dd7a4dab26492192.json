{"ast":null,"code":"import _classCallCheck from\"/home/enyel/Desktop/yandex1/react-around-api-full/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/enyel/Desktop/yandex1/react-around-api-full/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";/* eslint-disable implicit-arrow-linebreak */ /* eslint-disable no-confusing-arrow */ /* eslint-disable prefer-promise-reject-errors */ /* eslint-disable function-paren-newline */ /* eslint-disable no-underscore-dangle */var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;// console.log(this._baseUrl);\nthis._headers=headers;// console.log(this._headers);\n}// GET https://around.nomoreparties.co/v1/groupId/cards\n_createClass(Api,[{key:\"getCardList\",value:function getCardList(){return fetch(this._baseUrl+'/cards',{headers:this._headers}).then(function(res){// console.log(res, 'from api');\nif(res.ok){// console.log(res, 888);\nreturn res.json();}Promise.reject(\"Error!\"+res.status+res.statusText);// res.ok\n//   ? res.json()\n//   :\n});}// GET https://around.nomoreparties.co/v1/groupId/users/me\n},{key:\"getUserInfo\",value:function getUserInfo(){return fetch(this._baseUrl+\"/users/me\",{headers:this._headers}).then(function(res){return res.ok?res.json():Promise.reject(\"Error!\"+res.status+res.statusText);});}},{key:\"getPageInfo\",value:function getPageInfo(){return Promise.all([this.getCardList(),this.getUserInfo()]);}// PATCH https://around.nomoreparties.co/v1/groupId/users/me\n},{key:\"setUserInfo\",value:function setUserInfo(_ref2){var name=_ref2.name,about=_ref2.about;// console.log(name, about);\nreturn fetch(\"\".concat(this._baseUrl,\"/users/me\"),{headers:this._headers,method:'PATCH',body:JSON.stringify({name:name,about:about})}).then(function(res){return res.ok?res.json():Promise.reject(\"error\".concat(res.statusText));});}// PATCH https://around.nomoreparties.co/v1/groupId/users/me/avatar\n},{key:\"setUserAvatar\",value:function setUserAvatar(_ref3){var avatar=_ref3.avatar;return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{headers:this._headers,method:'PATCH',body:JSON.stringify({avatar:avatar})}).then(function(res){return res.ok?res.json():Promise.reject(\"error\".concat(res.statusText));});}// POST https://around.nomoreparties.co/v1/groupId/cards\n},{key:\"addCard\",value:function addCard(_ref4){var name=_ref4.name,link=_ref4.link;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{headers:this._headers,method:'POST',body:JSON.stringify({name:name,link:link})}).then(function(res){return res.ok?res.json():Promise.reject(\"error\".concat(res.statusText));});}},{key:\"removeCard\",value:function removeCard(cardId){// console.log(cardId);\nreturn fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId),{headers:this._headers,method:'DELETE'}).then(function(res){// console.log(res, 8585877797789);\nres.ok?res.json():Promise.reject(\"error\".concat(res.statusText));});}// PUT https://around.nomoreparties.co/v1/groupId/cards/likes/cardId\n// DELETE https://around.nomoreparties.co/v1/groupId/cards/likes/cardId\n},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardID,like){return(!like?fetch(\"\".concat(this._baseUrl,\"/cards/likes/\").concat(cardID),{headers:this._headers,method:'PUT'}):fetch(\"\".concat(this._baseUrl,\"/cards/likes/\").concat(cardID),{headers:this._headers,method:'DELETE'})).then(function(res){return res.ok?res.json():Promise.reject(\"error\".concat(res.statusText));});}}]);return Api;}();export default Api;","map":{"version":3,"sources":["/home/enyel/Desktop/yandex1/react-around-api-full/front-end/src/utils/Api.js"],"names":["Api","baseUrl","headers","_baseUrl","_headers","fetch","then","res","ok","json","Promise","reject","status","statusText","all","getCardList","getUserInfo","name","about","method","body","JSON","stringify","avatar","link","cardId","cardID","like"],"mappings":"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","sourcesContent":["/* eslint-disable implicit-arrow-linebreak */\n/* eslint-disable no-confusing-arrow */\n/* eslint-disable prefer-promise-reject-errors */\n/* eslint-disable function-paren-newline */\n/* eslint-disable no-underscore-dangle */\nclass Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    // console.log(this._baseUrl);\n    this._headers = headers;\n    // console.log(this._headers);\n  }\n\n  // GET https://around.nomoreparties.co/v1/groupId/cards\n  getCardList() {\n    return fetch(this._baseUrl + '/cards', {\n      headers: this._headers,\n    }).then((res) => {\n      // console.log(res, 'from api');\n      if (res.ok) {\n        // console.log(res, 888);\n        return res.json();\n      }\n      Promise.reject(`Error!` + res.status + res.statusText);\n      // res.ok\n      //   ? res.json()\n      //   :\n    });\n  }\n\n  // GET https://around.nomoreparties.co/v1/groupId/users/me\n  getUserInfo() {\n    return fetch(this._baseUrl + `/users/me`, {\n      headers: this._headers,\n    }).then((res) =>\n      res.ok\n        ? res.json()\n        : Promise.reject(`Error!` + res.status + res.statusText)\n    );\n  }\n\n  getPageInfo() {\n    return Promise.all([this.getCardList(), this.getUserInfo()]);\n  }\n\n  // PATCH https://around.nomoreparties.co/v1/groupId/users/me\n  setUserInfo({ name, about }) {\n    // console.log(name, about);\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers,\n      method: 'PATCH',\n      body: JSON.stringify({\n        name,\n        about,\n      }),\n    }).then((res) =>\n      res.ok ? res.json() : Promise.reject(`error${res.statusText}`)\n    );\n  }\n\n  // PATCH https://around.nomoreparties.co/v1/groupId/users/me/avatar\n  setUserAvatar({ avatar }) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      headers: this._headers,\n      method: 'PATCH',\n      body: JSON.stringify({\n        avatar,\n      }),\n    }).then((res) =>\n      res.ok ? res.json() : Promise.reject(`error${res.statusText}`)\n    );\n  }\n\n  // POST https://around.nomoreparties.co/v1/groupId/cards\n  addCard({ name, link }) {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers,\n      method: 'POST',\n      body: JSON.stringify({\n        name,\n        link,\n      }),\n    }).then((res) =>\n      res.ok ? res.json() : Promise.reject(`error${res.statusText}`)\n    );\n  }\n\n  removeCard(cardId) {\n    // console.log(cardId);\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      headers: this._headers,\n      method: 'DELETE',\n    }).then((res) => {\n      // console.log(res, 8585877797789);\n      res.ok ? res.json() : Promise.reject(`error${res.statusText}`);\n    });\n  }\n\n  // PUT https://around.nomoreparties.co/v1/groupId/cards/likes/cardId\n  // DELETE https://around.nomoreparties.co/v1/groupId/cards/likes/cardId\n  changeLikeCardStatus(cardID, like) {\n    return (!like\n      ? fetch(`${this._baseUrl}/cards/likes/${cardID}`, {\n          headers: this._headers,\n          method: 'PUT',\n        })\n      : fetch(`${this._baseUrl}/cards/likes/${cardID}`, {\n          headers: this._headers,\n          method: 'DELETE',\n        })\n    ).then((res) =>\n      res.ok ? res.json() : Promise.reject(`error${res.statusText}`)\n    );\n  }\n}\n\nexport default Api;\n"]},"metadata":{},"sourceType":"module"}